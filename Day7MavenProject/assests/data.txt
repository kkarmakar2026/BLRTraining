This is modification with buffered writer